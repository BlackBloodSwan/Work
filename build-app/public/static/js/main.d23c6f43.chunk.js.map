{"version":3,"sources":["Form.js","Api.js","CheckToken.js","App.js","index.js"],"names":["Option","Select","Content","Layout","NameForm","selectAfter","placeholder","style","width","onChange","value","onSelectChange","setState","selectedOption","console","log","submit","e","a","preventDefault","state","loading","data","valueProjectID","valueRole","valueEmail","fetch","method","mode","headers","body","JSON","stringify","then","res","json","Modal","info","title","check","access_token","localStorage","getItem","axios","get","response","projectId","error","content","handleChangeProjectID","event","target","handleChangeRole","handleChangeEmail","padding","textAlign","className","onSubmit","this","required","type","addonAfter","onClick","Component","baseURL","client","create","token","returnValue","API","requestToken","indexOf","email","setItem","email_verified","exp","family_name","given_name","name","picture","locale","hd","checkToken","Header","Footer","App","responseGoogle","CheckToken","Zi","id_token","status","isLoggedIn","failure","clear","position","theme","defaultSelectedKeys","lineHeight","Item","key","clientId","buttonText","onSuccess","onFailure","cookiePolicy","scope","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d23c6f43.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './index.css';\r\nimport 'antd/dist/antd.css';\r\nimport './index.css';\r\nimport { Layout } from 'antd';\r\nimport { Input, Select } from 'antd';\r\nimport { Modal } from 'antd';\r\nimport axios from 'axios';\r\n\r\nconst { Option } = Select;\r\nconst { Content } = Layout;\r\n\r\nclass NameForm extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            loading: false,\r\n            response: null,\r\n            value: ''\r\n        };\r\n    }\r\n    selectAfter = () => {\r\n        return (\r\n            <Select placeholder=\"Select Email Ending\" style={{ width: 200 }} onChange={(value) => this.onSelectChange(value)}>\r\n                <Option value=\"@mediamarktsaturn.com\">@mediamarktsaturn.com</Option>\r\n                <Option value=\"@mediamarktsaturn.de\">@mediamarktsaturn.de</Option>\r\n            </Select>\r\n        )\r\n    }\r\n\r\n    onSelectChange = (value) => {\r\n        this.setState({\r\n            selectedOption: value\r\n        })\r\n        console.log(value)\r\n    }\r\n\r\n\r\n    submit = async (e) => {\r\n        e.preventDefault();\r\n        this.setState({ ...this.state, loading: true })\r\n        const data = {\r\n            \"project_id\": this.state.valueProjectID,\r\n            \"role\": this.state.valueRole,\r\n            \"e_mail\": this.state.valueEmail + this.state.selectedOption\r\n        };\r\n        //  https://auto-iam-api-bg4m6eql4q-ew.a.run.app, http://127.0.0.1:5000/ \r\n        console.log(data)\r\n        fetch('https://auto-iam-api-bg4m6eql4q-ew.a.run.app/add_user_to_binding', {\r\n            method: 'POST',\r\n            mode: 'cors',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => console.log(res));\r\n        this.setState({\r\n            ...this.state,\r\n            loading: false,\r\n        })\r\n        Modal.info({\r\n            title: \"The user has been assigned to the role\"\r\n        })\r\n    }\r\n\r\n    check = async () => {\r\n        try {\r\n            const access_token = localStorage.getItem('access_token')\r\n            const response = await axios.get(`https://cloudresourcemanager.googleapis.com/v1/projects/` + this.state.valueProjectID, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${access_token}`\r\n                }\r\n            });\r\n            console.log(response);\r\n            if (!response.data.projectId) {\r\n                Modal.error({\r\n                    title: 'This Project ID is not correct',\r\n                    content: 'Please look if the spelling is right.',\r\n                });\r\n            }\r\n            else{\r\n                Modal.info({\r\n                    title: \"Project exist!\"\r\n                })\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            Modal.error({\r\n                title: 'Api is not reachable ',\r\n                content: 'This is the ' + error,\r\n            });\r\n        }\r\n    }\r\n\r\n    handleChangeProjectID = (event) => {\r\n        console.log(event.target.value)\r\n        this.setState({\r\n            ...this.state,\r\n            valueProjectID: event.target.value\r\n        })\r\n    }\r\n    handleChangeRole = (event) => {\r\n        console.log(event.target.value)\r\n        this.setState({\r\n            ...this.state,\r\n            valueRole: event.target.value\r\n        })\r\n    }\r\n    handleChangeEmail = (event) => {\r\n        console.log(event.target.value)\r\n        this.setState({\r\n            ...this.state,\r\n            valueEmail: event.target.value\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Layout>\r\n                <Content style={{ padding: '0 50px', textAlign: 'left' }}>\r\n                    <div className=\"App\">\r\n                        <header className=\"App-header\">\r\n                            <form onSubmit={this.submit}>\r\n                                <br />\r\n                                Project-ID :\r\n              <Input required placeholder=\"input in small letters\" type=\"text\" value={this.state.valueProjectID} onChange={this.handleChangeProjectID} />\r\n                                <br /><br />\r\n                                <label>\r\n                                    Role :\r\n              <Input required placeholder=\"first letter in upper case\" type=\"text\" value={this.state.valueRole} onChange={this.handleChangeRole} />\r\n                                </label>\r\n                                <br /> <br />\r\n                                <label>\r\n                                    E-Mail :\r\n              <Input required placeholder=\"input in small letters\" addonAfter={this.selectAfter()} type=\"text\" value={this.state.valueEmail} onChange={this.handleChangeEmail} />\r\n                                </label>\r\n                                <br />\r\n                                <br />\r\n                                <button type=\"submit\"> Submit </button>\r\n                            </form>\r\n                            <form>\r\n                                <br/>\r\n                                <button onClick={this.check} type=\"button\"> Check Project-ID </button>\r\n                            </form>\r\n                        </header>\r\n                    </div>\r\n                </Content>\r\n\r\n            </Layout>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NameForm;","import axios from 'axios'\r\n\r\nclass API {\r\n    constructor(baseURL) {\r\n        this.client = axios.create({ baseURL: baseURL })\r\n    }\r\n\r\n    requestToken(token) {\r\n        return this.client.get(`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${token}`)\r\n    }\r\n}\r\n\r\nexport default new API('http://127.0.0.1:5000')","import API from \"./Api\";\r\n\r\nasync function checkToken(token) {\r\n    let returnValue = {}\r\n    try {\r\n        const response = await API.requestToken(token)\r\n        // check if email exist in array\r\n        const array = [\r\n                \"schimmerd@mediamarktsaturn.com\",\r\n                \"seitzf@mediamarktsaturn.com\",\r\n                \"raudizs@mediamarktsaturn.com\",\r\n                \"handschuhj@mediamarktsaturn.com\",\r\n                \"hoke@mediamarktsaturn.com\",\r\n                \"gerstmeyer@mediamarktsaturn.com\",\r\n                \"goppold@mediamarktsaturn.com\",\r\n                \"schallado@mediamarktsaturn.de\",\r\n                \"domenicschalla@gmail.com\",\r\n\r\n        ]\r\n        if (array.indexOf(response.data.email) > -1 ) {\r\n            localStorage.setItem(\"token\", token)\r\n            localStorage.setItem(\"isLoggedIn\", \"true\")\r\n            localStorage.setItem(\"user_profile\", JSON.stringify({\r\n                \"status\": 200,\r\n                \"profile\": {\r\n                    \"email\": response.data.email,\r\n                    \"email_verified\": response.data.email_verified,\r\n                    \"expires_in\": response.data.exp,\r\n                    \"family_name\": response.data.family_name,\r\n                    \"given_name\": response.data.given_name,\r\n                    \"name\": response.data.name,\r\n                    \"picture\": response.data.picture,\r\n                    \"locale\": response.data.locale,\r\n                    \"domain\": response.data.hd\r\n                }\r\n            }))\r\n            returnValue = { \"status\": 200, \"desc\": \"Ok: Token still valid\" }\r\n        } else {\r\n            returnValue = { \"status\": 401, \"desc\": \"Unauthorized\" }\r\n        }\r\n        return returnValue\r\n\r\n    } catch (e) {\r\n        return { \"status\": 400, \"error\": \"Invalid value or token expired\", \"desc\": e }\r\n    }\r\n}\r\n\r\nexport default checkToken","import React, { Component } from \"react\";\nimport NameForm from \"./Form\"\nimport GoogleLogin from 'react-google-login';\nimport CheckToken from \"./CheckToken\";\nimport \"./index.css\";\nimport { Layout, Menu } from 'antd';\n\n\nconst { Header, Content, Footer } = Layout;\n\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      isLoggedIn: false\n    }\n  }\n  responseGoogle = async (response) => {\n    console.log(response);\n    //Weiterleitung zur Form.js\n    const res = await CheckToken(response.Zi.id_token)\n    localStorage.setItem(\"access_token\", response.Zi.access_token)\n    if (res.status !== 200) {\n      console.log(res)\n    }\n    else {\n      this.setState({ isLoggedIn: true })\n    }\n  }\n\n  failure = (response) => {\n    console.log(response)\n  }\n\n\n  async componentDidMount() {\n    //Vom lokal storage den Token holen \n    const res = await CheckToken(localStorage.getItem(\"token\"))\n    if (res.status !== 200) {\n      console.log(res)\n      localStorage.clear()\n    }\n    else {\n      this.setState({ isLoggedIn: true })\n    }\n  }\n\n\n  render() {\n    return (\n      <Layout className=\"layout\">\n        <Header style={{ position: \"relative\", textAlign: \"left\" }}>\n          <div className=\"logo\" />\n          <Menu\n            theme=\"dark\"\n            mode=\"horizontal\"\n            defaultSelectedKeys={['1']}\n            style={{ lineHeight: '64px' }}\n          >\n            <Menu.Item key=\"1\">Add User to binding</Menu.Item>\n          </Menu>\n        </Header>\n        <Content style={{ padding: '100 100px', position: \"relative\", textAlign: \"center\" }}>\n          <div className=\"App\">\n            {\n              this.state.isLoggedIn === false\n                ? <GoogleLogin\n                  clientId=\"583258145332-nc2pi59numak156h8boc49easpo22jp5.apps.googleusercontent.com\"\n                  buttonText=\"Login\"\n                  onSuccess={this.responseGoogle}\n                  onFailure={this.failure}\n                  cookiePolicy={'single_host_origin'}\n                  scope=\"https://www.googleapis.com/auth/cloud-platform https://www.googleapis.com/auth/cloud-platform.read-only\"\n                />\n                : <NameForm />\n            }\n          </div>\n        </Content>\n        <Footer style={{ textAlign: 'center' }}>Made with Love by Data Access Team</Footer>\n      </Layout>\n    );\n  }\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}